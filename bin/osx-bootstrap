#!/bin/bash

set -euo pipefail

# install homebrew if not already installed
if ! type "brew" > /dev/null 2>&1; then
  echo "installing homebrew..."
  /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"
fi

echo "updating brew..."
brew update

# install binaries
binaries=(
 bash
 ctags
 fortune
 git
 gh
 go
 lua
 openssl
 readline
 tmux
 nvim
 gradle
 kotlin-language-server
 yarn
 reattach-to-user-namespace
 svn
 tmuxinator
)

echo "installing binaries..."
brew install ${binaries[@]}

# install cask applications
apps=(
  cmake
  dropbox
  iterm2
  docker
  osxfuse
  sequel-pro
  brave-browser
  1password
  vlc
  google-backup-and-sync
  adobe-acrobat-reader
  slack
  zoom
)

echo "installing applications..."
brew install --cask ${apps[@]}

# install rust and rust analyzer
echo "installing rust and rust analyzer"
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
echo "tapping cask fonts"
brew tap homebrew/cask-fonts

# install fonts
fonts=(
  font-clear-sans
  font-roboto
  font-fantasque-sans-mono
)

echo "installing fonts..."
brew install ${fonts[@]}

echo "installing powerline fonts..."
currentdir=$(pwd)
cd /tmp
git clone https://github.com/powerline/fonts.git && cd fonts
chmod +x install.sh
./install.sh
cd $currentdir

echo "cleaning up"
rm -rf /tmp/fonts
brew cleanup

